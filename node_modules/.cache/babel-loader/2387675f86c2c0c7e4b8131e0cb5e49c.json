{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\back_fix\\\\adminkatest\\\\client\\\\src\\\\components\\\\pages\\\\Products\\\\ProductFilters\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport ProductContext from \"../ProductContext\";\nimport classes from './ProductFilters.module.css';\nimport { getPost, updatePost } from '../../../queries/postQueries';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductFilters = () => {\n  _s();\n\n  var _category$filters;\n\n  const {\n    product\n  } = useContext(ProductContext);\n  const [category, setCategory] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState(product.filters || []);\n  useEffect(() => {\n    getPost(product.category, 'Category').then(response => setCategory(response.post));\n  }, []);\n  useEffect(() => {\n    product.filters = selectedFilters;\n    updatePost(product, 'Product');\n  }, [selectedFilters]);\n\n  function changeFilters(filter) {\n    if (isFilterInProduct(filter)) {\n      setSelectedFilters(selectedFilters.filter(selectedFilter => selectedFilter !== filter));\n      return;\n    }\n\n    setSelectedFilters([...selectedFilters, filter]);\n  }\n\n  const isFilterInProduct = filter => {\n    const test = selectedFilters.find(selectedFilter => selectedFilter === filter);\n    return test ? true : false;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [category === null || category === void 0 ? void 0 : (_category$filters = category.filters) === null || _category$filters === void 0 ? void 0 : _category$filters.map(filter => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.filtersList,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: filter.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: filter.subfilters.map(subfilter => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [subfilter, \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: isFilterInProduct(subfilter),\n            checked: isFilterInProduct(subfilter),\n            onChange: () => changeFilters(subfilter)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 90\n          }, this)]\n        }, subfilter, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 58\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 21\n      }, this)]\n    }, filter.title, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductFilters, \"ThZn48kpSKZ+P2BgAYrPh/iFuVk=\");\n\n_c = ProductFilters;\nexport default ProductFilters;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductFilters\");","map":{"version":3,"names":["React","useState","useContext","useEffect","ProductContext","classes","getPost","updatePost","ProductFilters","product","category","setCategory","selectedFilters","setSelectedFilters","filters","then","response","post","changeFilters","filter","isFilterInProduct","selectedFilter","test","find","map","filtersList","title","subfilters","subfilter"],"sources":["D:/Work/back_fix/adminkatest/client/src/components/pages/Products/ProductFilters/index.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport ProductContext from \"../ProductContext\";\r\nimport classes from './ProductFilters.module.css';\r\nimport { getPost, updatePost } from '../../../queries/postQueries';\r\n\r\nconst ProductFilters = () => {\r\n    const {product} = useContext(ProductContext);\r\n    const [category, setCategory] = useState('');\r\n    const [selectedFilters, setSelectedFilters] = useState(product.filters || []);\r\n \r\n    useEffect(() => {\r\n        getPost(product.category, 'Category')\r\n            .then(response => setCategory(response.post));\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        product.filters = selectedFilters;\r\n        updatePost(product, 'Product');\r\n    }, [selectedFilters])\r\n\r\n    function changeFilters(filter){\r\n        if(isFilterInProduct(filter)){\r\n            setSelectedFilters(selectedFilters.filter(selectedFilter => selectedFilter !== filter));\r\n            return;\r\n        }\r\n            \r\n        setSelectedFilters([...selectedFilters, filter]);\r\n    }\r\n\r\n    const isFilterInProduct = (filter) => {\r\n        const test = selectedFilters.find(selectedFilter => selectedFilter === filter);\r\n        return test ? true : false;\r\n    }\r\n       \r\n    return (\r\n        <div>\r\n            {category?.filters?.map(filter => \r\n                <div key={filter.title} className={classes.filtersList}>\r\n                    <h4>{filter.title}</h4>\r\n                    <ul>\r\n                    { filter.subfilters.map(subfilter => <li key={subfilter}>{subfilter} <input type=\"checkbox\" value={isFilterInProduct(subfilter)} checked={isFilterInProduct(subfilter)} onChange={() => changeFilters(subfilter)}/></li>)  }\r\n                    </ul>\r\n                   \r\n                </div>\r\n            )}\r\n            <h3>Фильтры</h3>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductFilters;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,8BAApC;;;AAEA,MAAMC,cAAc,GAAG,MAAM;EAAA;;EAAA;;EACzB,MAAM;IAACC;EAAD,IAAYP,UAAU,CAACE,cAAD,CAA5B;EACA,MAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACW,eAAD,EAAkBC,kBAAlB,IAAwCZ,QAAQ,CAACQ,OAAO,CAACK,OAAR,IAAmB,EAApB,CAAtD;EAEAX,SAAS,CAAC,MAAM;IACZG,OAAO,CAACG,OAAO,CAACC,QAAT,EAAmB,UAAnB,CAAP,CACKK,IADL,CACUC,QAAQ,IAAIL,WAAW,CAACK,QAAQ,CAACC,IAAV,CADjC;EAEH,CAHQ,EAGN,EAHM,CAAT;EAKAd,SAAS,CAAC,MAAM;IACZM,OAAO,CAACK,OAAR,GAAkBF,eAAlB;IACAL,UAAU,CAACE,OAAD,EAAU,SAAV,CAAV;EACH,CAHQ,EAGN,CAACG,eAAD,CAHM,CAAT;;EAKA,SAASM,aAAT,CAAuBC,MAAvB,EAA8B;IAC1B,IAAGC,iBAAiB,CAACD,MAAD,CAApB,EAA6B;MACzBN,kBAAkB,CAACD,eAAe,CAACO,MAAhB,CAAuBE,cAAc,IAAIA,cAAc,KAAKF,MAA5D,CAAD,CAAlB;MACA;IACH;;IAEDN,kBAAkB,CAAC,CAAC,GAAGD,eAAJ,EAAqBO,MAArB,CAAD,CAAlB;EACH;;EAED,MAAMC,iBAAiB,GAAID,MAAD,IAAY;IAClC,MAAMG,IAAI,GAAGV,eAAe,CAACW,IAAhB,CAAqBF,cAAc,IAAIA,cAAc,KAAKF,MAA1D,CAAb;IACA,OAAOG,IAAI,GAAG,IAAH,GAAU,KAArB;EACH,CAHD;;EAKA,oBACI;IAAA,WACKZ,QADL,aACKA,QADL,4CACKA,QAAQ,CAAEI,OADf,sDACK,kBAAmBU,GAAnB,CAAuBL,MAAM,iBAC1B;MAAwB,SAAS,EAAEd,OAAO,CAACoB,WAA3C;MAAA,wBACI;QAAA,UAAKN,MAAM,CAACO;MAAZ;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAA,UACEP,MAAM,CAACQ,UAAP,CAAkBH,GAAlB,CAAsBI,SAAS,iBAAI;UAAA,WAAqBA,SAArB,oBAAgC;YAAO,IAAI,EAAC,UAAZ;YAAuB,KAAK,EAAER,iBAAiB,CAACQ,SAAD,CAA/C;YAA4D,OAAO,EAAER,iBAAiB,CAACQ,SAAD,CAAtF;YAAmG,QAAQ,EAAE,MAAMV,aAAa,CAACU,SAAD;UAAhI;YAAA;YAAA;YAAA;UAAA,QAAhC;QAAA,GAASA,SAAT;UAAA;UAAA;UAAA;QAAA,QAAnC;MADF;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA,GAAUT,MAAM,CAACO,KAAjB;MAAA;MAAA;MAAA;IAAA,QADH,CADL,eAUI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAVJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAeH,CA5CD;;GAAMlB,c;;KAAAA,c;AA8CN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}