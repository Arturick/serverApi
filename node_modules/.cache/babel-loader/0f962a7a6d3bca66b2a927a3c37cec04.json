{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\back_fix\\\\adminkatest\\\\client\\\\src\\\\components\\\\pages\\\\Products\\\\LinkedProducts\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport ProductContext from \"../ProductContext\";\nimport SubmitButton from '../../../UI/SubmitButton';\nimport classes from './LinkedProducts.module.css';\nimport { updatePost } from '../../../queries/postQueries';\nimport { getPosts } from '../../../queries/postQueries';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LinkedProducts = () => {\n  _s();\n\n  const {\n    product\n  } = useContext(ProductContext);\n  const [products, setProducts] = useState([]);\n  const [linkedProducts, setLinkedProducts] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState([]);\n  useEffect(() => {\n    getPosts('Product').then(response => {\n      setProducts(response.data.posts);\n      setLinkedProducts(product.linkedProducts);\n      setSelectedProduct(JSON.stringify(response.data.posts[0]));\n    });\n  }, []);\n\n  const addLinkedProduct = ev => {\n    ev.preventDefault();\n    const selectedProductParsed = JSON.parse(selectedProduct);\n    const isThisProduct = linkedProducts.find(product => product.title === selectedProductParsed.title);\n\n    if (!isThisProduct) {\n      setLinkedProducts([...linkedProducts, selectedProductParsed]);\n      product.linkedProducts = [...linkedProducts, selectedProductParsed];\n      updatePost(product, 'Product');\n    }\n  };\n\n  const deleteLinkedProduct = productTitle => {\n    setLinkedProducts(linkedProducts.filter(product => product.title !== productTitle));\n    product.linkedProducts = linkedProducts.filter(product => product.title !== productTitle);\n    updatePost(product, 'Product');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041F\\u0440\\u0438\\u0432\\u044F\\u0437\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.form,\n      onSubmit: ev => addLinkedProduct(ev),\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        onInput: ev => setSelectedProduct(ev.target.value),\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: JSON.stringify(product),\n          children: product.title\n        }, product.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        value: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: linkedProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.productItem,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.delete,\n          onClick: () => deleteLinkedProduct(product.title),\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LinkedProducts, \"Hwa4BPgvPHv632SoJo6mCJAYM70=\");\n\n_c = LinkedProducts;\nexport default LinkedProducts;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinkedProducts\");","map":{"version":3,"names":["React","useState","useEffect","useContext","ProductContext","SubmitButton","classes","updatePost","getPosts","LinkedProducts","product","products","setProducts","linkedProducts","setLinkedProducts","selectedProduct","setSelectedProduct","then","response","data","posts","JSON","stringify","addLinkedProduct","ev","preventDefault","selectedProductParsed","parse","isThisProduct","find","title","deleteLinkedProduct","productTitle","filter","form","target","value","map","productItem","delete","id"],"sources":["D:/Work/back_fix/adminkatest/client/src/components/pages/Products/LinkedProducts/index.jsx"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport ProductContext from \"../ProductContext\";\r\nimport SubmitButton from '../../../UI/SubmitButton';\r\nimport classes from './LinkedProducts.module.css'\r\nimport { updatePost } from '../../../queries/postQueries';\r\nimport { getPosts } from '../../../queries/postQueries';\r\n\r\nconst LinkedProducts = () => {\r\n    const {product} = useContext(ProductContext);\r\n    const [products, setProducts] = useState([]);\r\n    const [linkedProducts, setLinkedProducts] = useState([])\r\n    const [selectedProduct, setSelectedProduct] = useState([])\r\n\r\n    useEffect(() => {\r\n        getPosts('Product').then((response) => {\r\n            setProducts(response.data.posts)\r\n            setLinkedProducts(product.linkedProducts)\r\n            setSelectedProduct(JSON.stringify(response.data.posts[0]))\r\n        })\r\n    }, [])\r\n\r\n    const addLinkedProduct = (ev) => {\r\n        ev.preventDefault();\r\n\r\n        const selectedProductParsed = JSON.parse(selectedProduct)\r\n        const isThisProduct = linkedProducts.find(product => product.title === selectedProductParsed.title)\r\n        \r\n        if(!isThisProduct){\r\n            setLinkedProducts([...linkedProducts, selectedProductParsed])\r\n            product.linkedProducts = [...linkedProducts, selectedProductParsed];\r\n            updatePost(product, 'Product')\r\n        }\r\n    }\r\n\r\n    const deleteLinkedProduct = (productTitle) => {\r\n        setLinkedProducts(linkedProducts.filter(product => product.title !== productTitle))\r\n        product.linkedProducts = linkedProducts.filter(product => product.title !== productTitle);\r\n\r\n        updatePost(product, 'Product')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h3>Привязанные товары</h3>\r\n            <form className={classes.form} onSubmit={(ev) => addLinkedProduct(ev)}>\r\n                <select onInput={(ev) => setSelectedProduct(ev.target.value)}>\r\n                    {products.map(product => \r\n                        <option value={JSON.stringify(product)} key={product.title}>{product.title}</option>\r\n                    )}\r\n                </select>\r\n                <SubmitButton value=\"Добавить\"/>\r\n            </form>\r\n            <div>\r\n                {linkedProducts.map(product => \r\n                    <div key={product.id} className={classes.productItem}>\r\n                        <div>{product.title}</div>\r\n                        <div className={classes.delete} onClick={() => deleteLinkedProduct(product.title)}>Удалить</div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LinkedProducts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}