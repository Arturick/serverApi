{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\back_fix\\\\adminkatest\\\\client\\\\src\\\\components\\\\pages\\\\Products\\\\ProductCategory\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport ProductContext from \"../ProductContext\";\nimport { getPosts } from \"../../../queries/postQueries\";\nimport { changeProductCategory } from \"../../../queries/postQueries\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductCategory = () => {\n  _s();\n\n  const {\n    product\n  } = useContext(ProductContext);\n  const [categories, setCategories] = useState([]); //all categories\n\n  const [selectedCategory, setSelectedCategory] = useState(product.category); //state that conrols switch\n\n  const [isLoading, setIsLoading] = useState(false); //loading state\n\n  useEffect(() => {\n    getPosts('Category').then(response => {\n      //get all categories \n      setCategories(response.data.posts); //and set it to state\n    });\n  }, []);\n\n  const updateSelectedCategory = async selectedCategoryTitle => {\n    setSelectedCategory(selectedCategoryTitle);\n    setIsLoading(true);\n    await changeProductCategory(product.title, selectedCategoryTitle); //server query to update selected category and add current product to it\n\n    setIsLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 20\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"select\", {\n      style: {\n        marginBottom: \"20px\"\n      },\n      value: selectedCategory,\n      onChange: ev => updateSelectedCategory(ev.target.value),\n      children: categories ? categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: category.title,\n        children: category.title\n      }, category.title, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 15\n      }, this)) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductCategory, \"j7g9Rwqldw/sssIgW8bPLd7+Tx8=\");\n\n_c = ProductCategory;\nexport default ProductCategory;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCategory\");","map":{"version":3,"names":["React","useState","useEffect","useContext","ProductContext","getPosts","changeProductCategory","ProductCategory","product","categories","setCategories","selectedCategory","setSelectedCategory","category","isLoading","setIsLoading","then","response","data","posts","updateSelectedCategory","selectedCategoryTitle","title","marginBottom","ev","target","value","map"],"sources":["D:/Work/back_fix/adminkatest/client/src/components/pages/Products/ProductCategory/index.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport ProductContext from \"../ProductContext\";\r\nimport { getPosts } from \"../../../queries/postQueries\";\r\nimport { changeProductCategory } from \"../../../queries/postQueries\";\r\n\r\nconst ProductCategory = () => {\r\n  const {product} = useContext(ProductContext);\r\n  const [categories, setCategories] = useState([]); //all categories\r\n  const [selectedCategory, setSelectedCategory] = useState(product.category); //state that conrols switch\r\n  const [isLoading, setIsLoading] = useState(false); //loading state\r\n\r\n  useEffect(() => {\r\n    getPosts('Category').then(response => { //get all categories \r\n      setCategories(response.data.posts); //and set it to state\r\n    })\r\n  }, []);\r\n\r\n  const updateSelectedCategory = async (selectedCategoryTitle) => {\r\n    setSelectedCategory(selectedCategoryTitle);\r\n\r\n    setIsLoading(true)\r\n    await changeProductCategory(product.title, selectedCategoryTitle) //server query to update selected category and add current product to it\r\n    setIsLoading(false)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3 style={{ marginBottom: \"10px\" }}>Категория</h3>\r\n      {isLoading ? <h3>Обновление...</h3> : null}\r\n      <select\r\n        style={{ marginBottom: \"20px\" }}\r\n        value={selectedCategory}\r\n        onChange={(ev) => updateSelectedCategory(ev.target.value)}\r\n      >\r\n        {categories\r\n          ? categories.map((category) => (\r\n              <option value={category.title} key={category.title}>\r\n                {category.title}\r\n              </option>\r\n            ))\r\n          : null}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCategory;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,8BAAzB;AACA,SAASC,qBAAT,QAAsC,8BAAtC;;;AAEA,MAAMC,eAAe,GAAG,MAAM;EAAA;;EAC5B,MAAM;IAACC;EAAD,IAAYL,UAAU,CAACC,cAAD,CAA5B;EACA,MAAM,CAACK,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C,CAF4B,CAEsB;;EAClD,MAAM,CAACU,gBAAD,EAAmBC,mBAAnB,IAA0CX,QAAQ,CAACO,OAAO,CAACK,QAAT,CAAxD,CAH4B,CAGgD;;EAC5E,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,KAAD,CAA1C,CAJ4B,CAIuB;;EAEnDC,SAAS,CAAC,MAAM;IACdG,QAAQ,CAAC,UAAD,CAAR,CAAqBW,IAArB,CAA0BC,QAAQ,IAAI;MAAE;MACtCP,aAAa,CAACO,QAAQ,CAACC,IAAT,CAAcC,KAAf,CAAb,CADoC,CACA;IACrC,CAFD;EAGD,CAJQ,EAIN,EAJM,CAAT;;EAMA,MAAMC,sBAAsB,GAAG,MAAOC,qBAAP,IAAiC;IAC9DT,mBAAmB,CAACS,qBAAD,CAAnB;IAEAN,YAAY,CAAC,IAAD,CAAZ;IACA,MAAMT,qBAAqB,CAACE,OAAO,CAACc,KAAT,EAAgBD,qBAAhB,CAA3B,CAJ8D,CAII;;IAClEN,YAAY,CAAC,KAAD,CAAZ;EACD,CAND;;EAQA,oBACE;IAAA,wBACE;MAAI,KAAK,EAAE;QAAEQ,YAAY,EAAE;MAAhB,CAAX;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,EAEGT,SAAS,gBAAG;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAH,GAA4B,IAFxC,eAGE;MACE,KAAK,EAAE;QAAES,YAAY,EAAE;MAAhB,CADT;MAEE,KAAK,EAAEZ,gBAFT;MAGE,QAAQ,EAAGa,EAAD,IAAQJ,sBAAsB,CAACI,EAAE,CAACC,MAAH,CAAUC,KAAX,CAH1C;MAAA,UAKGjB,UAAU,GACPA,UAAU,CAACkB,GAAX,CAAgBd,QAAD,iBACb;QAAQ,KAAK,EAAEA,QAAQ,CAACS,KAAxB;QAAA,UACGT,QAAQ,CAACS;MADZ,GAAoCT,QAAQ,CAACS,KAA7C;QAAA;QAAA;QAAA;MAAA,QADF,CADO,GAMP;IAXN;MAAA;MAAA;MAAA;IAAA,QAHF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAmBD,CAvCD;;GAAMf,e;;KAAAA,e;AAyCN,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}